{"version":3,"file":"block_settings.min.js","sources":["../src/block_settings.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to initialise the opencast block settings.\n *\n * @module     block/opencast\n * @copyright  2021 Tamara Gunkel, University of MÃ¼nster\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Tabulator from 'block_opencast/tabulator';\nimport $ from 'jquery';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport * as str from 'core/str';\nimport Notification from 'core/notification';\n\nexport const init = (rolesinputid, metadatainputid, metadataseriesinputid, transcriptionflavorinputid, ocinstanceid) => {\n\n    // Load strings\n    var strings = [\n        {key: 'heading_role', component: 'block_opencast'},\n        {key: 'heading_actions', component: 'block_opencast'},\n        {key: 'heading_permanent', component: 'block_opencast'},\n        {key: 'delete_role', component: 'block_opencast'},\n        {key: 'delete_confirm_role', component: 'block_opencast'},\n        {key: 'delete_metadata', component: 'block_opencast'},\n        {key: 'delete_confirm_metadata', component: 'block_opencast'},\n        {key: 'heading_name', component: 'block_opencast'},\n        {key: 'heading_datatype', component: 'block_opencast'},\n        {key: 'heading_description', component: 'block_opencast'},\n        {key: 'heading_required', component: 'block_opencast'},\n        {key: 'heading_readonly', component: 'block_opencast'},\n        {key: 'heading_params', component: 'block_opencast'},\n        {key: 'heading_defaultable', component: 'block_opencast'},\n        {key: 'delete', component: 'moodle'},\n        {key: 'transcription_flavor_key', component: 'block_opencast'},\n        {key: 'transcription_flavor_value', component: 'block_opencast'},\n        {key: 'transcription_flavor_delete', component: 'block_opencast'},\n        {key: 'transcription_flavor_confirm_delete', component: 'block_opencast'}\n    ];\n    str.get_strings(strings).then(function(jsstrings) {\n        // Style hidden input.\n        var rolesinput = $('#' + rolesinputid);\n        rolesinput.parent().hide();\n        rolesinput.parent().next().hide(); // Default value.\n\n        // Don't create tables if they are not visible.\n        if (!rolesinput.length) {\n            return;\n        }\n\n        var metadatainput = $('#' + metadatainputid);\n        metadatainput.parent().hide();\n        metadatainput.parent().next().hide(); // Default value.\n\n        var metadataseriesinput = $('#' + metadataseriesinputid);\n        metadataseriesinput.parent().hide();\n        metadataseriesinput.parent().next().hide(); // Default value.\n\n        var transcriptionflavorinput = $('#' + transcriptionflavorinputid);\n        transcriptionflavorinput.parent().hide();\n        transcriptionflavorinput.parent().next().hide(); // Default value.\n\n        var rolestable = new Tabulator(\"#rolestable_\" + ocinstanceid, {\n            data: JSON.parse(rolesinput.val()),\n            layout: \"fitColumns\",\n            dataChanged: function(data) {\n                data = data.filter(value => value.rolename);\n                rolesinput.val(JSON.stringify(data));\n            },\n            columns: [\n                {\n                    title: jsstrings[0], field: \"rolename\", editor: \"input\", widthGrow: 4, cellEdited: function(cell) {\n                        if (cell.getData().rolename.includes('[USERNAME]') || cell.getData().rolename.includes('[USERNAME_LOW]') ||\n                            cell.getData().rolename.includes('[USERNAME_UP]')) {\n                            // Tick permanent checkbox.\n                            cell.getRow().update({'permanent': 1});\n                            cell.getRow().getCell(\"permanent\").getElement().getElementsByTagName(\"input\")[0].disabled = true;\n                        } else {\n                            cell.getRow().getCell(\"permanent\").getElement().getElementsByTagName(\"input\")[0].disabled = false;\n                        }\n                    }\n                },\n                {title: jsstrings[1], field: \"actions\", editor: \"input\", widthGrow: 1},\n                {\n                    title: jsstrings[2],\n                    field: \"permanent\",\n                    hozAlign: \"center\",\n                    widthGrow: 0,\n                    formatter: function(cell) {\n                        var input = document.createElement('input');\n                        input.type = 'checkbox';\n                        input.checked = cell.getValue();\n                        input.addEventListener('click', function() {\n                            cell.getRow().update({'permanent': $(this).prop('checked') ? 1 : 0});\n                        });\n\n                        if (cell.getData().rolename.includes('[USERNAME]') || cell.getData().rolename.includes('[USERNAME_LOW]') ||\n                            cell.getData().rolename.includes('[USERNAME_UP]')) {\n                            input.disabled = true;\n                        }\n\n                        return input;\n                    }\n                },\n                {\n                    title: \"\",\n                    width: 40,\n                    headerSort: false,\n                    hozAlign: \"center\",\n                    formatter: function() {\n                        return '<i class=\"icon fa fa-trash fa-fw\"></i>';\n                    },\n                    cellClick: function(e, cell) {\n                        ModalFactory.create({\n                            type: ModalFactory.types.SAVE_CANCEL,\n                            title: jsstrings[3],\n                            body: jsstrings[4]\n                        })\n                            .then(function(modal) {\n                                modal.setSaveButtonText(jsstrings[3]);\n                                modal.getRoot().on(ModalEvents.save, function() {\n                                    cell.getRow().delete();\n                                });\n                                modal.show();\n                                return;\n                            }).catch(Notification.exception);\n                    }\n                }\n            ],\n        });\n\n        $('#addrow-rolestable_' + ocinstanceid).click(function() {\n            rolestable.addRow({'rolename': '', 'actions': '', 'permanent': 0});\n        });\n\n        var metadatatable = new Tabulator(\"#metadatatable_\" + ocinstanceid, {\n            data: JSON.parse(metadatainput.val()),\n            layout: \"fitColumns\",\n            movableRows: true,\n            rowMoved: function() {\n                // Order by row position\n                var data = metadatatable.getRows().map(row => row.getData());\n                data = data.filter(value => value.name);\n                metadatainput.val(JSON.stringify(data));\n            },\n            dataChanged: function() {\n                // Order by row position\n                var data = metadatatable.getRows().map(row => row.getData());\n                data = data.filter(value => value.name);\n                $('#' + metadatainputid).val(JSON.stringify(data));\n            },\n            columns: [\n                {\n                    title: jsstrings[7] + '   ' + $('#helpbtnname_' + ocinstanceid).html(),\n                    field: \"name\",\n                    editor: \"input\",\n                    widthGrow: 1,\n                    headerSort: false\n                },\n                {\n                    title: jsstrings[8], field: \"datatype\", widthGrow: 1, headerSort: false, editor: \"select\", editorParams:\n                        {\n                            values: {\n                                'text': 'String (text)',\n                                'select': 'Drop Down (select)',\n                                'autocomplete': 'Arrays (autocomplete)',\n                                'textarea': 'Long Text (textarea)',\n                                'date_time_selector': 'Date Time Selector (datetime)'\n                            }\n                        }\n                },\n                {\n                    title: jsstrings[9] + '   ' + $('#helpbtndescription_' + ocinstanceid).html(),\n                    field: \"description\",\n                    editor: \"textarea\",\n                    widthGrow: 2,\n                    headerSort: false\n                },\n                {\n                    title: jsstrings[10],\n                    field: \"required\", hozAlign: \"center\", widthGrow: 0, headerSort: false, formatter:\n\n                        function(cell) {\n                            var input = document.createElement('input');\n                            input.type = 'checkbox';\n                            input.checked = cell.getValue();\n                            input.addEventListener('click', function() {\n                                cell.getRow().update({'required': $(this).prop('checked') ? 1 : 0});\n                            });\n\n                            return input;\n                        }\n                },\n                {\n                    title: jsstrings[11],\n                    field: \"readonly\", hozAlign: \"center\", widthGrow: 0, headerSort: false, formatter:\n                        function(cell) {\n                            var input = document.createElement('input');\n                            input.type = 'checkbox';\n                            input.checked = cell.getValue();\n                            input.addEventListener('click', function() {\n                                cell.getRow().update({'readonly': $(this).prop('checked') ? 1 : 0});\n                            });\n\n                            return input;\n                        }\n                },\n                {\n                    title: jsstrings[12] + '   ' + $('#helpbtnparams_' + ocinstanceid).html(),\n                    field: \"param_json\",\n                    editor: \"textarea\",\n                    widthGrow: 2,\n                    headerSort: false\n                },\n                {\n                    title: jsstrings[13] + '   ' + $('#helpbtndefaultable_' + ocinstanceid).html(),\n                    field: \"defaultable\", hozAlign: \"center\", widthGrow: 0, headerSort: false, formatter:\n                        function(cell) {\n                            if (cell.getRow().getCell(\"name\").getValue() == 'title') {\n                                return;\n                            }\n                            var input = document.createElement('input');\n                            input.type = 'checkbox';\n                            input.checked = cell.getValue();\n                            input.addEventListener('click', function() {\n                                cell.getRow().update({'defaultable': $(this).prop('checked') ? 1 : 0});\n                            });\n                        }\n                },\n                {\n                    title: \"\", width: 40, headerSort: false, hozAlign: \"center\", formatter:\n                        function() {\n                            return '<i class=\"icon fa fa-trash fa-fw\"></i>';\n                        },\n                    cellClick: function(e, cell) {\n                        ModalFactory.create({\n                            type: ModalFactory.types.SAVE_CANCEL,\n                            title: jsstrings[5],\n                            body: jsstrings[6]\n                        })\n                            .then(function(modal) {\n                                modal.setSaveButtonText(jsstrings[14]);\n                                modal.getRoot().on(ModalEvents.save, function() {\n                                    cell.getRow().delete();\n                                });\n                                modal.show();\n                                return;\n                            }).catch(Notification.exception);\n                    }\n                }\n            ],\n        });\n\n        $('#addrow-metadatatable_' + ocinstanceid).click(function() {\n            metadatatable.addRow({'datatype': 'text', 'required': 0, 'readonly': 0, 'param_json': null});\n        });\n\n        var metadataseriestable = new Tabulator(\"#metadataseriestable_\" + ocinstanceid, {\n            data: JSON.parse(metadataseriesinput.val()),\n            layout: \"fitColumns\",\n            movableRows: true,\n            rowMoved: function() {\n                // Order by row position\n                var data = metadataseriestable.getRows().map(row => row.getData());\n                data = data.filter(value => value.name);\n                metadataseriesinput.val(JSON.stringify(data));\n            },\n            dataChanged: function() {\n                // Order by row position\n                var data = metadataseriestable.getRows().map(row => row.getData());\n                data = data.filter(value => value.name);\n                $('#' + metadataseriesinputid).val(JSON.stringify(data));\n            },\n            columns: [\n                {\n                    title: jsstrings[7] + '   ' + $('#helpbtnname_' + ocinstanceid).html(),\n                    field: \"name\",\n                    editor: \"input\",\n                    widthGrow: 1,\n                    headerSort: false\n                },\n                {\n                    title: jsstrings[8], field: \"datatype\", widthGrow: 1, headerSort: false, editor: \"select\", editorParams:\n                        {\n                            values: {\n                                'text': 'String (text)',\n                                'select': 'Drop Down (select)',\n                                'autocomplete': 'Arrays (autocomplete)',\n                                'textarea': 'Long Text (textarea)',\n                                'date_time_selector': 'Date Time Selector (datetime)'\n                            }\n                        }\n                },\n                {\n                    title: jsstrings[9] + '   ' + $('#helpbtndescription_' + ocinstanceid).html(),\n                    field: \"description\",\n                    editor: \"textarea\",\n                    widthGrow: 2,\n                    headerSort: false\n                },\n                {\n                    title: jsstrings[10],\n                    field: \"required\", hozAlign: \"center\", widthGrow: 0, headerSort: false, formatter:\n\n                        function(cell) {\n                            var input = document.createElement('input');\n                            input.type = 'checkbox';\n                            input.checked = cell.getValue();\n                            input.addEventListener('click', function() {\n                                cell.getRow().update({'required': $(this).prop('checked') ? 1 : 0});\n                            });\n\n                            return input;\n                        }\n                },\n                {\n                    title: jsstrings[11],\n                    field: \"readonly\", hozAlign: \"center\", widthGrow: 0, headerSort: false, formatter:\n                        function(cell) {\n                            var input = document.createElement('input');\n                            input.type = 'checkbox';\n                            input.checked = cell.getValue();\n                            input.addEventListener('click', function() {\n                                cell.getRow().update({'readonly': $(this).prop('checked') ? 1 : 0});\n                            });\n\n                            return input;\n                        }\n                },\n                {\n                    title: jsstrings[12] + '   ' + $('#helpbtnparams_' + ocinstanceid).html(),\n                    field: \"param_json\",\n                    editor: \"textarea\",\n                    widthGrow: 2,\n                    headerSort: false\n                },\n                {\n                    title: jsstrings[13] + '   ' + $('#helpbtndefaultable_' + ocinstanceid).html(),\n                    field: \"defaultable\", hozAlign: \"center\", widthGrow: 0, headerSort: false, formatter:\n                        function(cell) {\n                            if (cell.getRow().getCell(\"name\").getValue() == 'title') {\n                                return;\n                            }\n                            var input = document.createElement('input');\n                            input.type = 'checkbox';\n                            input.checked = cell.getValue();\n                            input.addEventListener('click', function() {\n                                cell.getRow().update({'defaultable': $(this).prop('checked') ? 1 : 0});\n                            });\n                        }\n                },\n                {\n                    title: \"\", width: 40, headerSort: false, hozAlign: \"center\", formatter:\n                        function() {\n                            return '<i class=\"icon fa fa-trash fa-fw\"></i>';\n                        },\n                    cellClick: function(e, cell) {\n                        ModalFactory.create({\n                            type: ModalFactory.types.SAVE_CANCEL,\n                            title: jsstrings[5],\n                            body: jsstrings[6]\n                        })\n                            .then(function(modal) {\n                                modal.setSaveButtonText(jsstrings[14]);\n                                modal.getRoot().on(ModalEvents.save, function() {\n                                    cell.getRow().delete();\n                                });\n                                modal.show();\n                                return;\n                            }).catch(Notification.exception);\n                    }\n                }\n            ],\n        });\n\n        $('#addrow-metadataseriestable_' + ocinstanceid).click(function() {\n            metadataseriestable.addRow({'datatype': 'text', 'required': 0, 'readonly': 0, 'param_json': null});\n        });\n\n        // Transcription flavor.\n        // Because flavors are introduced in a way that it needs to take its value from the default,\n        // and the input value is not set via an upgrade, therefore, we would need to introduce a new\n        // way of extracting defaults and put it as its value.\n        extractDefaults(transcriptionflavorinput);\n        var transcriptionflavoroptions = new Tabulator(\"#transcriptionflavorsoptions_\" + ocinstanceid, {\n            data: JSON.parse(transcriptionflavorinput.val()),\n            layout: \"fitColumns\",\n            dataChanged: function(data) {\n                data = data.filter(value => value.key && value.value);\n                transcriptionflavorinput.val(JSON.stringify(data));\n            },\n            columns: [\n                {title: jsstrings[15], field: \"key\", headerSort: false, editor: \"input\", widthGrow: 1},\n                {title: jsstrings[16], field: \"value\", headerSort: false, editor: \"input\", widthGrow: 1},\n                {\n                    title: \"\",\n                    width: 40,\n                    headerSort: false,\n                    hozAlign: \"center\",\n                    formatter: function() {\n                        return '<i class=\"icon fa fa-trash fa-fw\"></i>';\n                    },\n                    cellClick: function(e, cell) {\n                        ModalFactory.create({\n                            type: ModalFactory.types.SAVE_CANCEL,\n                            title: jsstrings[17],\n                            body: jsstrings[18]\n                        })\n                            .then(function(modal) {\n                                modal.setSaveButtonText(jsstrings[17]);\n                                modal.getRoot().on(ModalEvents.save, function() {\n                                    cell.getRow().delete();\n                                });\n                                modal.show();\n                                return;\n                            }).catch(Notification.exception);\n                    }\n                }\n            ],\n        });\n\n        $('#addrow-transcriptionflavorsoptions_' + ocinstanceid).click(function() {\n            transcriptionflavoroptions.addRow({'key': '', 'value': ''});\n        });\n\n        /**\n         * Gets the default input value and replace it with actual value if it values are not initialised\n         *\n         * @param {object} input\n         */\n        function extractDefaults(input) {\n            var value = input.val();\n            if (value == '') {\n                var defaultstext = input.parent().next().text();\n                defaultstext = defaultstext != '' ?\n                    defaultstext.slice(defaultstext.indexOf('['), defaultstext.lastIndexOf(']') + 1) : '';\n                if (defaultstext != '') {\n                    input.val(defaultstext);\n                }\n            }\n        }\n        return;\n    }).catch(Notification.exception);\n};\n\n"],"names":["rolesinputid","metadatainputid","metadataseriesinputid","transcriptionflavorinputid","ocinstanceid","str","get_strings","key","component","then","jsstrings","rolesinput","parent","hide","next","length","metadatainput","metadataseriesinput","transcriptionflavorinput","rolestable","Tabulator","data","JSON","parse","val","layout","dataChanged","filter","value","rolename","stringify","columns","title","field","editor","widthGrow","cellEdited","cell","getData","includes","getRow","update","getCell","getElement","getElementsByTagName","disabled","hozAlign","formatter","input","document","createElement","type","checked","getValue","addEventListener","this","prop","width","headerSort","cellClick","e","create","ModalFactory","types","SAVE_CANCEL","body","modal","setSaveButtonText","getRoot","on","ModalEvents","save","delete","show","catch","Notification","exception","click","addRow","metadatatable","movableRows","rowMoved","getRows","map","row","name","html","editorParams","values","metadataseriestable","defaultstext","text","slice","indexOf","lastIndexOf","extractDefaults","transcriptionflavoroptions"],"mappings":"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"}